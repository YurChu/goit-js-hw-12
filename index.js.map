{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// -------------------------------------------\n// https://pixabay.com/users/50311976/   ------   u_2ddhzk1lhb ---------\n//  My API key: 50311976-cfb8a0f5325f69922ed901f36\nconst API_KEY = '50311976-cfb8a0f5325f69922ed901f36';\n\nconst BASE_URL = 'https://pixabay.com/api/';\n// --------------------------------------------------------------\n\nexport async function fetchData(query, page, perPage) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.error('Request error:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n// -------------------------------------------------------------\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nexport function renderGallery(images, isScroll = false) {\n  const markup = images\n    .map(\n      image => `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\" \n                    alt=\"${image.tags}\" \n                    // width=\"360\" \n                    // height=\"200\" \n                />\n            </a>\n            <div class=\"image-info-wrapper\">\n                <div class=\"image-info\">\n                    <span class=\"image-info-type\">Likes</span>\n                    <span class=\"image-info-value\">${image.likes}</span>                \n                </div>\n\n                <div class=\"image-info\">\n                    <span class=\"image-info-type\">Views</span>\n                    <span class=\"image-info-value\">${image.views}</span>                \n                </div>\n\n                <div class=\"image-info\">\n                    <span class=\"image-info-type\">Comments</span>\n                    <span class=\"image-info-value\">${image.comments}</span>                \n                </div>\n\n                <div class=\"image-info\">\n                    <span class=\"image-info-type\">Downloads</span>\n                    <span class=\"image-info-value\">${image.downloads}</span>                \n                </div>\n            </div>\n        </li>\n    `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nexport function showLoader() {\n  loader.classList.remove('visually-hidden');\n}\nexport function hideLoader() {\n  loader.classList.add('visually-hidden');\n}\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('visually-hidden');\n}\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('visually-hidden');\n}\n","import axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n// ----------------------------------------------\nimport { fetchData } from './js/pixabay-api';\nimport {\n  renderGallery,\n  showLoader,\n  hideLoader,\n  clearGallery,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst input = document.querySelector(\"input[name='search-text']\");\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\nconst perPage = 15;\nlet query = '';\nlet page = 1;\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  query = input.value.trim();\n  if (query === '') {\n    iziToast.show({\n      message: `No data`,\n      messageColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      backgroundColor: '#ffa000',\n      progressBar: false,\n      position: 'topRight',\n    });\n    return;\n  }\n  page = 1;\n  clearGallery();\n  hideLoadMoreButton();\n  showLoader();\n\n  try {\n    const data = await fetchData(query, page, perPage);\n    if (data.hits.length === 0) {\n      iziToast.show({\n        message: `There are no images matching your search query`,\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ffa000',\n        progressBar: false,\n        position: 'topRight',\n      });\n      return;\n    }\n    renderGallery(data.hits);\n    if (page * perPage < data.totalHits) showLoadMoreButton();\n  } catch (error) {\n    iziToast.show({\n      message: 'Error: Please try again later.',\n      messageColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      backgroundColor: '#ffa000',\n      progressBar: false,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n    form.reset();\n  }\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  page += 1;\n  showLoader();\n  try {\n    const data = await fetchData(query, page, perPage);\n    renderGallery(data.hits, true);\n    if (page * perPage >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.show({\n        message: `We're sorry, but you've reached the end of search results.`,\n        messageColor: '#fff',\n        messageSize: '16px',\n        messageLineHeight: '1.5',\n        backgroundColor: '#ffa000',\n        progressBar: false,\n        position: 'topRight',\n      });\n    }\n  } catch (error) {\n    iziToast.show({\n      message: 'Error: Please try again later.',\n      messageColor: '#fff',\n      messageSize: '16px',\n      messageLineHeight: '1.5',\n      backgroundColor: '#ffa000',\n      progressBar: false,\n      position: 'topRight',\n    });\n  } finally {\n    hideLoader();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchData","query","page","perPage","response","axios","error","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","renderGallery","images","isScroll","markup","image","showLoader","hideLoader","clearGallery","showLoadMoreButton","hideLoadMoreButton","input","form","event","iziToast","data"],"mappings":"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"}